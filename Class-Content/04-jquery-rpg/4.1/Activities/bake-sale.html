<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Boot Camp Bake Sale</title>
  </head>
  <body>
    <!--
    We're having a boot camp bake sale!
    Just kidding, but we are writing an app for one.
    -->
    <div id="total-sale"></div>
    <div id="bake-sale-list"></div>
    <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha256-k2WSCIexGzOj3Euiig+TlR8gA0EmPjuc79OEeY5L45g="
      crossorigin="anonymous"></script>
    <script type="text/javascript">
      var bakeSale = [
        {"name":"Apple Pie","price":9.99},
        {"name":"Special Brownie","price":29.99},
        {"name":"Rice Crispy Treat","price":2.99},
        {"name":"Cream Puff","price":4.99}
      ];
      /*
      For each element in the bakeSale array, create a container on the page
      Create separate elements for name and price, and place them in the container.
      */
      var totalPrice = 0;
      for(var i = 0; i < bakeSale.length; i++){
        var containerName = $("<div></div>");
        containerName.text(bakeSale[i].name);
        var containerPrice = $("<div></div>");
        containerPrice.text(bakeSale[i].price);
        var buttonBuy = $("<button>Buy</button>");
        buttonBuy.attr("ix",i);
        buttonBuy.on("click",function buy(evt){
          console.log(evt.target);
          totalPrice += bakeSale[$(evt.target).attr("ix")].price;
          $("#total-sale").html("total:"+totalPrice);
        });
        var bakeSaleElem = $("#bake-sale-list");
        bakeSaleElem.append(containerName);
        bakeSaleElem.append(containerPrice);
        bakeSaleElem.append(buttonBuy);
      }
      /*
      Create a "buy" button and place it in the container.
      Add a click event to the buy button that adds the price to a total.
      The total should start at 0.0.
      Display the total on the page.
      */
    </script>

  </body>
</html>
